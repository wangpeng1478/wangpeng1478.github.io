(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2a827519"],{"0458":function(t,e,a){"use strict";a.r(e);var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"word-type"},[a("Card",{staticClass:"card-view",attrs:{shadow:""}},[a("div",{staticClass:"search"},[a("Row",{attrs:{type:"flex",justify:"center",align:"middle"}},[a("Col",{staticStyle:{flex:"1"}},[a("Form",{ref:"formSearch",attrs:{"label-width":80,inline:""}},[a("FormItem",{attrs:{label:"分类名称"}},[a("Input",{on:{"on-keyup":function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.Search(e)}},model:{value:t.search.name,callback:function(e){t.$set(t.search,"name","string"===typeof e?e.trim():e)},expression:"search.name"}})],1)],1)],1),a("Col",[a("Button",{staticStyle:{"margin-left":"1em"},attrs:{type:"info"},on:{click:function(e){return t.openModal(-1)}}},[t._v("新增")])],1)],1)],1),a("div",{staticClass:"table"},[a("Table",{attrs:{border:"",columns:t.columns,data:t.data,loading:t.tableLoading},on:{"on-sort-change":t.sortChange},scopedSlots:t._u([{key:"name",fn:function(e){var n=e.row;return[a("strong",{attrs:{title:t.decoding(n.desc)},domProps:{innerHTML:t._s(t.highlight(t.decoding(n.name),t.search.name))}})]}},{key:"icon",fn:function(t){var e=t.row;return[a("div",{staticClass:"image",staticStyle:{margin:"10px auto",width:"80px",height:"80px"}},[e.icon?a("viewer",{attrs:{images:[]}},[a("img",{attrs:{src:e.icon,alt:e.name}})]):a("Icon",{attrs:{type:"ios-images"}})],1)]}},{key:"action",fn:function(e){var n=e.index;return[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"primary",size:"small"},on:{click:function(e){return t.openModal(n)}}},[t._v("编辑")]),a("Button",{attrs:{type:"error",size:"small"},on:{click:function(e){return t.remove(n)}}},[t._v("删除")])]}}])}),a("div",{staticClass:"page"},[a("Page",{attrs:{total:t.pager.Total,"show-elevator":"","show-total":""},on:{"on-change":t.pageChange}})],1),a("Modal",{attrs:{title:t.form._id?"修改["+t.decoding(t.form.name)+"]":"新增",transfer:!1,styles:{top:"20px"}},model:{value:t.operatingModalShow,callback:function(e){t.operatingModalShow=e},expression:"operatingModalShow"}},[a("Form",{ref:"formValidate",attrs:{model:t.form,rules:t.ruleValidate,"label-width":80}},[a("FormItem",{attrs:{label:"分类名称",prop:"name"}},[a("Input",{attrs:{placeholder:"请输入分类名称",maxlength:50},model:{value:t.form.name,callback:function(e){t.$set(t.form,"name","string"===typeof e?e.trim():e)},expression:"form.name"}})],1),a("FormItem",{attrs:{label:"排序"}},[a("InputNumber",{attrs:{precision:0},model:{value:t.form.sort,callback:function(e){t.$set(t.form,"sort",e)},expression:"form.sort"}})],1),a("FormItem",{attrs:{label:"图标"}},[a("upImg",{ref:"upImgIcon",attrs:{path:"type"},on:{"on-result":t.upImgResult}}),a("div",{staticClass:"image"},[t.form.icon?a("viewer",{attrs:{images:[]}},[a("img",{attrs:{src:t.form.icon}})]):a("Icon",{attrs:{type:"ios-images"}})],1)],1),a("FormItem",{attrs:{label:"说明"}},[a("Input",{attrs:{type:"textarea",placeholder:"请输入说明",autosize:{minRows:2,maxRows:5},maxlength:200,"show-word-limit":""},model:{value:t.form.desc,callback:function(e){t.$set(t.form,"desc","string"===typeof e?e.trim():e)},expression:"form.desc"}})],1)],1),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{staticStyle:{"margin-right":"5px"},attrs:{type:"text"},on:{click:function(e){t.operatingModalShow=!1}}},[t._v("取消")]),a("Button",{attrs:{type:"primary",loading:t.formLoading},on:{click:function(e){return t.handleSubmit("formValidate")}}},[t._v("\n            "+t._s(t.form._id?"修改":"新增")+"\n          ")])],1)],1)],1)])],1)},o=[],i=(a("a450"),a("1bc7"),a("d91d"),a("decf")),r=a("7e1e"),s=a("90de"),c={name:"word_type",components:{upImg:i["a"]},data:function(){return{search:{page:1,name:"",sort:""},columns:[{title:"分类名称",slot:"name"},{title:"图标",align:"center",width:180,slot:"icon"},{title:"排序",width:100,align:"center",sortable:!0,key:"sort"},{title:"操作",slot:"action",width:150,align:"center"}],data:[],operatingModalShow:!1,tableLoading:!1,formLoading:!1,searchLoading:!1,form:{_id:"",name:"",icon:"",desc:"",sort:1},pager:{Limit:0,Offset:0,Total:0},ruleValidate:{name:[{required:!0,message:"分类名称不能为空",trigger:"blur"}]}}},mounted:function(){this.getList()},methods:{decoding:function(t){return Object(s["i"])(t)},highlight:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return Object(s["d"])(t,e)},getList:function(){var t=this;this.tableLoading=!0,Object(r["a"])({type:"wordTypeList",data:this.search}).then((function(e){if(t.tableLoading=!1,t.searchLoading=!1,200===e.status)try{var a=e.data;if(a){var n=[],o=a.data||[],i=a.pager;o.forEach((function(t){try{n.push(JSON.parse(t))}catch(e){}})),t.data=n,t.pager=i}}catch(r){console.error(r),t.$Message.error("页面发生错误")}}))},upImgResult:function(t){t.error||(this.form.icon=t)},handleSubmit:function(t){var e=this;this.$refs[t].validate((function(t){if(t){e.formLoading=!0;var a=e.form;Object(r["a"])({type:"wordTypeAdd",data:a}).then((function(t){e.formLoading=!1,200===t.status&&(e.$Message.success("".concat(a._id?"修改":"新增","成功")),e.getList(),e.operatingModalShow=!1)}))}}))},Search:function(){this.searchLoading=!0,this.getList()},sortChange:function(t){"sort"===t.key&&(this.search.sort=t.order,this.Search())},pageChange:function(t){this.search.page=t,this.Search()},remove:function(t){var e=this,a=this.data[t]._id,n=this.data[t].name;this.$Modal.confirm({title:"提示",content:"确定删除【".concat(this.decoding(n),"】？"),onOk:function(){e.tableLoading=!0,Object(r["a"])({type:"wordTypeDelete",data:a}).then((function(t){e.tableLoading=!1,200===t.status&&(e.$Message.success("删除成功"),e.getList())}))}})},openModal:function(t){if(-1===t)this.form={_id:"",name:"",icon:"",desc:"",sort:this.pager.Total+1};else{var e=this.data[t];e.name=this.decoding(e.name),e.desc=this.decoding(e.desc),this.form=e}this.operatingModalShow=!0}}},l=c,d=(a("a900"),a("c701")),u=Object(d["a"])(l,n,o,!1,null,null,null);e["default"]=u.exports},1414:function(t,e,a){"use strict";a("d6bd")},4057:function(t,e,a){"use strict";a("de49");var n=a("a86f"),o=a("6bf8"),i=a("26df"),r="toString",s=/./[r],c=function(t){a("84e8")(RegExp.prototype,r,t,!0)};a("0926")((function(){return"/a/b"!=s.call({source:"a",flags:"b"})}))?c((function(){var t=n(this);return"/".concat(t.source,"/","flags"in t?t.flags:!i&&t instanceof RegExp?o.call(t):void 0)})):s.name!=r&&c((function(){return s.call(this)}))},"69b0":function(t,e){t.exports=Object.is||function(t,e){return t===e?0!==t||1/t===1/e:t!=t&&e!=e}},a900:function(t,e,a){"use strict";a("f185")},d6bd:function(t,e,a){},d91d:function(t,e,a){"use strict";var n=a("a86f"),o=a("69b0"),i=a("f417");a("c46f")("search",1,(function(t,e,a,r){return[function(a){var n=t(this),o=void 0==a?void 0:a[e];return void 0!==o?o.call(a,n):new RegExp(a)[e](String(n))},function(t){var e=r(a,t,this);if(e.done)return e.value;var s=n(t),c=String(this),l=s.lastIndex;o(l,0)||(s.lastIndex=0);var d=i(s,c);return o(s.lastIndex,l)||(s.lastIndex=l),null===d?-1:d.index}]}))},de49:function(t,e,a){a("26df")&&"g"!=/./g.flags&&a("bb8b").f(RegExp.prototype,"flags",{configurable:!0,get:a("6bf8")})},decf:function(t,e,a){"use strict";var n=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"upload"},[a("input",{ref:"upload",staticStyle:{display:"none"},attrs:{id:"upload",type:"file",accept:"image/*"},on:{change:t.fileChang}}),a("label",{ref:"dz",staticClass:"upload-view",attrs:{for:"upload"}},[a("Icon",{staticStyle:{color:"#3399ff"},attrs:{type:"ios-cloud-upload",size:"52"}}),a("p",[t._v("单击或拖动文件以上传")])],1)])},o=[],i=(a("4057"),a("a450"),a("b231")),r=a.n(i),s=a("90de"),c=a("e04f"),l=a.n(c),d={name:"upload",props:{path:{path:String,default:"all"}},data:function(){return{time:(new Date).toLocaleString(),Bucket:"wxword-1254176432",Region:"ap-shanghai",SecretId:"",SecretKey:""}},mounted:function(){var t=l.a.get("SecretId"),e=l.a.get("token");t&&e?(this.SecretId=t,this.SecretKey=e,this.initdz(),this.initCos()):this.$Message.warning("参数错误")},methods:{initdz:function(){var t=this,e=this.$refs.dz;e.ondragover=function(t){t.preventDefault(),this.style.borderColor="red"},e.ondragleave=function(){this.style.borderColor="#dcdee2"},e.ondrop=function(e){this.style.borderColor="#dcdee2",e.preventDefault();var a=e.dataTransfer.files;a.length>0&&t.putObject(a[0])}},initCos:function(){var t=this;this.cos=new r.a({SecretId:t.SecretId,SecretKey:t.SecretKey,Protocol:"https:"})},fileChang:function(){var t=this.$refs.upload.files[0];this.putObject(t)},putObject:function(t){var e=this;if(t.type&&-1!==t.type.indexOf("image")){this.$Spin.show({render:function(t){return t("div",[t("Icon",{class:"demo-spin-icon-load",props:{type:"ios-loading",size:18}}),t("div","上传中")])}});var a=this,n=t.name?Math.random().toString(16).substring(2)+"-"+t.name:Math.random().toString(16).substring(2),o=Object(s["h"])(new Date,"{y}-{m}-{d}");this.$refs.upload.value="",a.cos.putObject({Bucket:a.Bucket,Region:a.Region,Key:"".concat(a.path,"/").concat(o,"/").concat(n),Body:t},(function(t,a){e.$Spin.hide(),!t&&a.Location?e.$emit("on-result","https://".concat(a.Location)):(e.$emit("on-result",t),e.$Notice.error({title:"上传失败",desc:t.error}))}))}else this.$Message.warning("请上传图片")}}},u=d,f=(a("1414"),a("c701")),h=Object(f["a"])(u,n,o,!1,null,"3b0e612d",null);e["a"]=h.exports},f185:function(t,e,a){}}]);